<?xml version="1.0" encoding="UTF-8"?>
<database xmlns="http://nouveau.freedesktop.org/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://nouveau.freedesktop.org/ rules-ng.xsd">
<import file="freedreno_copyright.xml"/>

<doc>
	Register definitions for the display related hw blocks on
	msm/snapdragon
</doc>

<enum name="chipset">
	<value name="MDP40"/>
</enum>

<domain name="MDP" width="32" prefix="chipset">
	<enum name="mdp40_bpc">
		<brief>bits per component</brief>
		<value name="BPC1" value="0"/> <!-- 1 bit -->
		<value name="BPC2" value="1"/> <!-- 2 bits -->
		<value name="BPC6" value="2"/> <!-- 6 bits -->
		<value name="BPC8" value="3"/> <!-- 8 bits -->
	</enum>

	<enum name="mdp40_dma_bpc">
		<brief>bits per component for dmae cnfg</brief>
		<value name="DBPC5" value="1"/> <!-- 5 bits -->
		<value name="DBPC6" value="2"/> <!-- 6 bits -->
		<value name="DBPC8" value="3"/> <!-- 8 bits -->
	</enum>

	<enum name="mdp40_alpha_type">
		<value name="FG_CONST" value="0"/>
		<value name="BG_CONST" value="1"/>
		<value name="FG_PIXEL" value="2"/>
		<value name="BG_PIXEL" value="3"/>
	</enum>

	<enum name="mdp40_pipe">
		<brief>pipe names, index into PIPE[]</brief>
		<value name="VG1" value="0"/>
		<value name="VG2" value="1"/>
		<value name="RGB1" value="2"/>
		<value name="RGB2" value="3"/>
		<value name="RGB3" value="4"/>
		<value name="VG3" value="5"/>
		<value name="VG4" value="6"/>
	</enum>

	<enum name="mdp40_mixer">
		<value name="MIXER0" value="0"/>
		<value name="MIXER1" value="1"/>
		<value name="MIXER2" value="2"/>
	</enum>

	<enum name="mdp40_mixer_stage_id">
		<value name="STAGE_UNUSED" value="0"/>
		<value name="STAGE_BASE" value="1"/>
		<value name="STAGE0" value="2"/>   <!-- zorder 0 -->
		<value name="STAGE1" value="3"/>   <!-- zorder 1 -->
		<value name="STAGE2" value="4"/>   <!-- zorder 2 -->
		<value name="STAGE3" value="5"/>   <!-- zorder 3 -->
	</enum>

	<bitset name="mdp40_layermixer_in_cfg">
		<brief>appears to map pipe to mixer stage</brief>
		<bitfield name="PIPE0" low="0"  high="2"  type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE0_MIXER1" pos="3" type="boolean"/>
		<bitfield name="PIPE1" low="4"  high="6"  type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE1_MIXER1" pos="7" type="boolean"/>
		<bitfield name="PIPE2" low="8"  high="10" type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE2_MIXER1" pos="11" type="boolean"/>
		<bitfield name="PIPE3" low="12" high="14" type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE3_MIXER1" pos="15" type="boolean"/>
		<bitfield name="PIPE4" low="16" high="18" type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE4_MIXER1" pos="19" type="boolean"/>
		<bitfield name="PIPE5" low="20" high="22" type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE5_MIXER1" pos="23" type="boolean"/>
		<bitfield name="PIPE6" low="24" high="26" type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE6_MIXER1" pos="27" type="boolean"/>
		<bitfield name="PIPE7" low="28" high="30" type="mdp40_mixer_stage_id"/>
		<bitfield name="PIPE7_MIXER1" pos="31" type="boolean"/>
	</bitset>

	<bitset name="mdp40_mixer_op">
		<bitfield name="FG_ALPHA" low="0" high="1" type="mdp40_alpha_type"/>
		<bitfield name="FG_INV_ALPHA" pos="2" type="boolean"/>
		<bitfield name="FG_MOD_ALPHA" pos="3" type="boolean"/>
		<bitfield name="BG_ALPHA" low="4" high="5" type="mdp40_alpha_type"/>
		<bitfield name="BG_INV_ALPHA" pos="6" type="boolean"/>
		<bitfield name="BG_MOD_ALPHA" pos="7" type="boolean"/>
		<bitfield name="FG_TRANSP" pos="8" type="boolean"/>
		<bitfield name="BG_TRANSP" pos="9" type="boolean"/>
	</bitset>

	<bitset name="mdp40_format">
		<bitfield name="G_BPC" low="0" high="1" type="mdp40_bpc"/>
		<bitfield name="B_BPC" low="2" high="3" type="mdp40_bpc"/>
		<bitfield name="R_BPC" low="4" high="5" type="mdp40_bpc"/>
		<bitfield name="A_BPC" low="6" high="7" type="mdp40_bpc"/>
		<bitfield name="ALPHA_ENABLE" pos="8" type="boolean"/>
		<bitfield name="CPP" low="9" high="10" type="uint">
			<brief>8bit characters per pixel minus 1</brief>
		</bitfield>
		<bitfield name="ROTATED_90" pos="12" type="boolean"/>
		<bitfield name="UNPACK_COUNT" low="13" high="14" type="uint"/>
		<bitfield name="UNPACK_TIGHT" pos="17" type="boolean"/>
		<bitfield name="UNPACK_ALIGN_MSB" pos="18" type="boolean"/>
		<bitfield name="SOLID_FILL" pos="22" type="boolean"/>
	</bitset>

	<bitset name="mdp40_unpack_pattern">
		<bitfield name="ELEM0" low="0"  high="7"/>
		<bitfield name="ELEM1" low="8"  high="15"/>
		<bitfield name="ELEM2" low="16" high="23"/>
		<bitfield name="ELEM3" low="24" high="31"/>
	</bitset>

	<bitset name="reg_wh">
		<bitfield name="HEIGHT" low="16" high="31" type="uint"/>
		<bitfield name="WIDTH" low="0" high="15" type="uint"/>
	</bitset>

	<bitset name="reg_xy">
		<bitfield name="Y" low="16" high="31" type="uint"/>
		<bitfield name="X" low="0" high="15" type="uint"/>
	</bitset>

	<bitset name="mdp40_op_mode">
		<bitfield name="SCALEX_EN" pos="0" type="boolean"/>
		<bitfield name="SCALEY_EN" pos="1" type="boolean"/>
		<bitfield name="SRC_YCBCR" pos="9" type="boolean"/>
		<bitfield name="DST_YCBCR" pos="10" type="boolean"/>
		<bitfield name="CSC_EN" pos="11" type="boolean"/>
		<bitfield name="FLIP_LR" pos="13" type="boolean"/>
		<bitfield name="FLIP_UD" pos="14" type="boolean"/>
		<bitfield name="DITHER_EN" pos="15" type="boolean"/>
		<bitfield name="IGC_LUT_EN" pos="16" type="boolean"/>
		<bitfield name="DEINT_EN" pos="18" type="boolean"/>
		<bitfield name="DEINT_ODD_REF" pos="19" type="boolean"/>
	</bitset>

	<bitset name="mdp40_irqs">
		<bitfield name="OVERLAY0_DONE" pos="0" type="boolean"/>
		<bitfield name="OVERLAY1_DONE" pos="1" type="boolean"/>
		<bitfield name="DMA_S_DONE" pos="2" type="boolean"/>
		<bitfield name="DMA_E_DONE" pos="3" type="boolean"/>
		<bitfield name="DMA_P_DONE" pos="4" type="boolean"/>
		<bitfield name="VG1_HISTOGRAM" pos="5" type="boolean"/>
		<bitfield name="VG2_HISTOGRAM" pos="6" type="boolean"/>
		<bitfield name="PRIMARY_VSYNC" pos="7" type="boolean"/>
		<bitfield name="PRIMARY_INTF_UDERRUN" pos="8" type="boolean"/>
		<bitfield name="EXTERNAL_VSYNC" pos="9" type="boolean"/>
		<bitfield name="EXTERNAL_INTF_UDERRUN" pos="10" type="boolean"/>
		<bitfield name="PRIMARY_RDPTR" pos="11" type="boolean"/>  <!-- read pointer -->
		<bitfield name="DMA_P_HISTOGRAM" pos="17" type="boolean"/>
		<bitfield name="DMA_S_HISTOGRAM" pos="26" type="boolean"/>
		<bitfield name="OVERLAY2_DONE" pos="30" type="boolean"/>
	</bitset>

	<group name="mdp40_csc">
		<array offset="0x400" name="MV" length="9" stride="4">
			<reg32 offset="0" name="VAL"/>
		</array>
		<array offset="0x500" name="PRE_BV" length="3" stride="4">
			<reg32 offset="0" name="VAL"/>
		</array>
		<array offset="0x580" name="POST_BV" length="3" stride="4">
			<reg32 offset="0" name="VAL"/>
		</array>
		<array offset="0x600" name="PRE_LV" length="6" stride="4">
			<reg32 offset="0" name="VAL"/>
		</array>
		<array offset="0x680" name="POST_LV" length="6" stride="4">
			<reg32 offset="0" name="VAL"/>
		</array>
	</group>

	<reg32 offset="0x00000" name="VERSION"/>

	<reg32 offset="0x00038" name="DISP_INTF_SEL" variants="MDP40"/>
	<reg32 offset="0x0003c" name="RESET_STATUS" variants="MDP40"/>  <!-- only mdp40 >v2.1 -->
	<reg32 offset="0x0004c" name="READ_CNFG" variants="MDP40"/>  <!-- something about # of pending requests.. -->
	<reg32 offset="0x00050" name="INTR_ENABLE" variants="MDP40" type="mdp40_irqs"/>
	<reg32 offset="0x00054" name="INTR_STATUS" variants="MDP40" type="mdp40_irqs"/>
	<reg32 offset="0x00058" name="INTR_CLEAR" variants="MDP40" type="mdp40_irqs"/>
	<reg32 offset="0x00060" name="EBI2_LCD0" variants="MDP40"/>
	<reg32 offset="0x00064" name="EBI2_LCD1" variants="MDP40"/>
	<reg32 offset="0x00070" name="PORTMAP_MODE" variants="MDP40"/>

	<!-- mdp chip-select controller: -->
	<reg32 offset="0x000c0" name="CS_CONTROLLER0" variants="MDP40"/>
	<reg32 offset="0x000c4" name="CS_CONTROLLER1" variants="MDP40"/>

	<reg32 offset="0x100f0" name="LAYERMIXER2_IN_CFG" variants="MDP40" type="mdp40_layermixer_in_cfg"/>
	<reg32 offset="0x100fc" name="LAYERMIXER_IN_CFG_UPDATE_METHOD"/>
	<reg32 offset="0x10100" name="LAYERMIXER_IN_CFG" variants="MDP40" type="mdp40_layermixer_in_cfg"/>

	<reg32 offset="0x30050" name="VG2_SRC_FORMAT" variants="MDP40"/>
	<reg32 offset="0x31008" name="VG2_CONST_COLOR" variants="MDP40"/>

	<reg32 offset="0x18000" name="OVERLAY_FLUSH">
		<bitfield name="OVLP0" pos="0" type="boolean"/>
		<bitfield name="OVLP1" pos="1" type="boolean"/>
		<bitfield name="VG1" pos="2" type="boolean"/>
		<bitfield name="VG2" pos="3" type="boolean"/>
		<bitfield name="RGB1" pos="4" type="boolean"/>
		<bitfield name="RGB2" pos="5" type="boolean"/>
	</reg32>

	<group name="mdp40_overlayproc">
		<reg32 offset="0x0004" name="CFG"/>
		<reg32 offset="0x0008" name="SIZE" type="reg_wh"/>
		<reg32 offset="0x000c" name="BASE"/>
		<reg32 offset="0x0010" name="STRIDE" type="uint"/>
		<reg32 offset="0x0014" name="OPMODE"/>

		<group name="mdp40_mixer_stage">
			<reg32 offset="0x00" name="OP" type="mdp40_mixer_op"/>
			<reg32 offset="0x04" name="FG_ALPHA"/>
			<reg32 offset="0x08" name="BG_ALPHA"/>
			<reg32 offset="0x0c" name="TRANSP_LOW0"/>
			<reg32 offset="0x10" name="TRANSP_LOW1"/>
			<reg32 offset="0x14" name="TRANSP_HIGH0"/>
			<reg32 offset="0x18" name="TRANSP_HIGH1"/>
		</group>

		<bitset name="mdp40_co3_sel">
			<bitfield name="FG_ALPHA" pos="0" type="boolean"/> <!-- otherwise bg alpha -->
		</bitset>

		<array offset="0x0104" name="STAGE0" length="1" stride="0x1c">
			<use-group name="mdp40_mixer_stage"/>
		</array>
		<reg32 offset="0x1004" name="STAGE0_CO3_SEL" type="mdp40_co3_sel"/>

		<array offset="0x0124" name="STAGE1" length="1" stride="0x1c">
			<use-group name="mdp40_mixer_stage"/>
		</array>
		<reg32 offset="0x1404" name="STAGE1_CO3_SEL" type="mdp40_co3_sel"/>

		<array offset="0x0144" name="STAGE2" length="1" stride="0x1c">
			<use-group name="mdp40_mixer_stage"/>
		</array>
		<reg32 offset="0x1804" name="STAGE2_CO3_SEL" type="mdp40_co3_sel"/>

		<array offset="0x0160" name="STAGE3" length="1" stride="0x1c">
			<use-group name="mdp40_mixer_stage"/>
		</array>
		<reg32 offset="0x1b84" name="STAGE3_CO3_SEL" type="mdp40_co3_sel"/>

		<reg32 offset="0x0180" name="TRANSP_LOW0"/>
		<reg32 offset="0x0184" name="TRANSP_LOW1"/>
		<reg32 offset="0x0188" name="TRANSP_HIGH0"/>
		<reg32 offset="0x018c" name="TRANSP_HIGH1"/>

		<reg32 offset="0x0200" name="CSC_CONFIG"/>

		<array offset="0x2000" name="CSC" length="1" stride="0x700">
			<use-group name="mdp40_csc"/>
		</array>
	</group>

	<!--
		TODO it would be nice to have some way to make this look like an
		array even though the base addresses are in funny places not
		regularly spaced.
	 -->
	<array offset="0x10000" name="OVLP0" length="1" stride="0x8000" variants="MDP40">
		<!-- MDP4_OVERLAYPROC0_BASE -->
		<use-group name="mdp40_overlayproc"/>
	</array>
	<array offset="0x18000" name="OVLP1" length="1" stride="0x8000" variants="MDP40">
		<!-- MDP4_OVERLAYPROC1_BASE -->
		<use-group name="mdp40_overlayproc"/>
	</array>
	<array offset="0x88000" name="OVLP2" length="1" stride="0x8000" variants="MDP40">
		<!-- MDP4_OVERLAYPROC2_BASE -->
		<use-group name="mdp40_overlayproc"/>
	</array>

	<group name="mdp40_dma">
		<reg32 offset="0x0000" name="CONFIG" variants="MDP40">
			<bitfield name="G_BPC" low="0" high="1" type="mdp40_dma_bpc"/>
			<bitfield name="B_BPC" low="2" high="3" type="mdp40_dma_bpc"/>
			<bitfield name="R_BPC" low="4" high="5" type="mdp40_dma_bpc"/>
			<bitfield name="PACK_ALIGN_MSB" pos="7" type="boolean"/>
			<bitfield name="PACK" low="8" high="15"/>
			<!-- bit 24 is DITHER_EN on DMA_P, DEFLKR_EN on DMA_E -->
			<bitfield name="DEFLKR_EN" pos="24" type="boolean"/>
			<bitfield name="DITHER_EN" pos="24" type="boolean"/>
		</reg32>
		<reg32 offset="0x0004" name="SRC_SIZE" type="reg_wh" variants="MDP40"/>
		<reg32 offset="0x0008" name="SRC_BASE" variants="MDP40"/>
		<reg32 offset="0x000c" name="SRC_STRIDE" variants="MDP40" type="uint"/>
		<reg32 offset="0x0010" name="DST_SIZE" type="reg_wh" variants="MDP40"/>
		<reg32 offset="0x0028" name="OP_MODES"/>  <!-- OP_MODE on DMA_S -->
		<reg32 offset="0x0070" name="OP_MODEP"/>  <!-- OP_MODE on DMA_P -->
		<reg32 offset="0x1004" name="FETCH_CONFIG"/>
		<array offset="0x3000" name="CSC" length="1" stride="0x700">
			<use-group name="mdp40_csc"/>
		</array>
	</group>

	<array offset="0x90000" name="DMA_P" length="1" stride="0x10000">
		<use-group name="mdp40_dma"/>
	</array>

	<array offset="0xa0000" name="DMA_S" length="1" stride="0x10000">
		<use-group name="mdp40_dma"/>
	</array>

	<array offset="0xb0000" name="DMA_E" length="1" stride="0x10000">
		<use-group name="mdp40_dma"/>
	</array>

	<!--
		TODO enhance rnndec so that it could show use the symbolic name
		(enum mdp40_pipe) as array index

		TODO length should be 7, but that would collide w/ OVLP2..!?!
		this register map is a bit strange..
	 -->
	<array offset="0x20000" name="PIPE" length="6" stride="0x10000" variants="MDP40">
		<reg32 offset="0x0000" name="SRC_SIZE" type="reg_wh"/>
		<reg32 offset="0x0004" name="SRC_XY" type="reg_xy"/>
		<reg32 offset="0x0008" name="DST_SIZE" type="reg_wh"/>
		<reg32 offset="0x000c" name="DST_XY" type="reg_xy"/>
		<reg32 offset="0x0010" name="SRCP0_BASE"/>
		<reg32 offset="0x0014" name="SRCP1_BASE"/>
		<reg32 offset="0x0018" name="SRCP2_BASE"/>
		<reg32 offset="0x0040" name="SRC_STRIDE_A" type="uint">
			<bitfield name="P0" low="0" high="15" type="uint"/>
			<bitfield name="P1" low="16" high="31" type="uint"/>
		</reg32>
		<reg32 offset="0x0044" name="SRC_STRIDE_B" type="uint">
			<bitfield name="P2" low="0" high="15" type="uint"/>
			<bitfield name="P3" low="16" high="31" type="uint"/>
		</reg32>
		<reg32 offset="0x0048" name="FRAME_SIZE" type="reg_wh"/>
		<reg32 offset="0x0050" name="SRC_FORMAT" type="mdp40_format"/>
		<reg32 offset="0x0054" name="SRC_UNPACK" type="mdp40_unpack_pattern"/>
		<reg32 offset="0x0058" name="OP_MODE" type="mdp40_op_mode"/>
		<reg32 offset="0x005c" name="PHASEX_STEP"/>
		<reg32 offset="0x0060" name="PHASEY_STEP"/>
		<reg32 offset="0x1004" name="FETCH_CONFIG"/>
		<reg32 offset="0x1008" name="SOLID_COLOR"/>

		<array offset="0x4000" name="CSC" length="1" stride="0x700">
			<use-group name="mdp40_csc"/>
		</array>
	</array>

	<!--
		ENCODERS
			LCDC and DSI seem the same, DTV is just slightly different..
	 -->

	<bitset name="mdp40_ctrl_polarity">
		<!-- not entirely sure if these bits mean hi or low.. -->
		<bitfield name="HSYNC_HI" pos="0" type="boolean"/>
		<bitfield name="VSYNC_HI" pos="1" type="boolean"/>
		<bitfield name="DATA_EN_HI" pos="2" type="boolean"/>
	</bitset>

	<bitset name="mdp40_active_hctl">
		<bitfield name="START" low="0" high="14" type="uint"/>
		<bitfield name="END" low="16" high="30" type="uint"/>
		<bitfield name="ACTIVE_START_X" pos="31" type="boolean"/>
	</bitset>

	<bitset name="mdp40_display_hctl">
		<bitfield name="START" low="0" high="15" type="uint"/>
		<bitfield name="END" low="16" high="31" type="uint"/>
	</bitset>

	<bitset name="mdp40_hsync_ctrl">
		<bitfield name="PULSEW" low="0" high="15" type="uint"/>
		<bitfield name="PERIOD" low="16" high="31" type="uint"/>
	</bitset>

	<bitset name="mdp40_underflow_clr">
		<bitfield name="COLOR" low="0" high="23"/>
		<bitfield name="ENABLE_RECOVERY" pos="31" type="boolean"/>
	</bitset>

	<!-- offset is 0xe0000 on !mdp40.. -->
	<array offset="0xc0000" name="LCDC" length="1" stride="0x1000">
		<reg32 offset="0x0000" name="ENABLE"/>
		<reg32 offset="0x0004" name="HSYNC_CTRL" type="mdp40_hsync_ctrl"/>
		<reg32 offset="0x0008" name="VSYNC_PERIOD" type="uint"/>
		<reg32 offset="0x000c" name="VSYNC_LEN" type="uint"/>
		<reg32 offset="0x0010" name="DISPLAY_HCTRL" type="mdp40_display_hctl"/>
		<reg32 offset="0x0014" name="DISPLAY_VSTART" type="uint"/>
		<reg32 offset="0x0018" name="DISPLAY_VEND" type="uint"/>
		<reg32 offset="0x001c" name="ACTIVE_HCTL" type="mdp40_active_hctl"/>
		<reg32 offset="0x0020" name="ACTIVE_VSTART" type="uint"/>
		<reg32 offset="0x0024" name="ACTIVE_VEND" type="uint"/>
		<reg32 offset="0x0028" name="BORDER_CLR"/>
		<reg32 offset="0x002c" name="UNDERFLOW_CLR" type="mdp40_underflow_clr"/>
		<reg32 offset="0x0030" name="HSYNC_SKEP"/>
		<reg32 offset="0x0034" name="TEST_CNTL"/>
		<reg32 offset="0x0038" name="CTRL_POLARITY" type="mdp40_ctrl_polarity"/>
	</array>

	<array offset="0xd0000" name="DTV" length="1" stride="0x1000">
		<reg32 offset="0x0000" name="ENABLE"/>
		<reg32 offset="0x0004" name="HSYNC_CTRL" type="mdp40_hsync_ctrl"/>
		<reg32 offset="0x0008" name="VSYNC_PERIOD" type="uint"/>
		<reg32 offset="0x000c" name="VSYNC_LEN" type="uint"/>
		<reg32 offset="0x0018" name="DISPLAY_HCTRL" type="mdp40_display_hctl"/>
		<reg32 offset="0x001c" name="DISPLAY_VSTART" type="uint"/>
		<reg32 offset="0x0020" name="DISPLAY_VEND" type="uint"/>
		<reg32 offset="0x002c" name="ACTIVE_HCTL" type="mdp40_active_hctl"/>
		<reg32 offset="0x0030" name="ACTIVE_VSTART" type="uint"/>
		<reg32 offset="0x0038" name="ACTIVE_VEND" type="uint"/>
		<reg32 offset="0x0040" name="BORDER_CLR"/>
		<reg32 offset="0x0044" name="UNDERFLOW_CLR" type="mdp40_underflow_clr"/>
		<reg32 offset="0x0048" name="HSYNC_SKEW"/>
		<reg32 offset="0x004c" name="TEST_CNTL"/>
		<reg32 offset="0x0050" name="CTRL_POLARITY" type="mdp40_ctrl_polarity"/>
	</array>

	<array offset="0xe0000" name="DSI" length="1" stride="0x1000">
		<reg32 offset="0x0000" name="ENABLE"/>
		<reg32 offset="0x0004" name="HSYNC_CTRL" type="mdp40_hsync_ctrl"/>
		<reg32 offset="0x0008" name="VSYNC_PERIOD" type="uint"/>
		<reg32 offset="0x000c" name="VSYNC_LEN" type="uint"/>
		<reg32 offset="0x0010" name="DISPLAY_HCTRL" type="mdp40_display_hctl"/>
		<reg32 offset="0x0014" name="DISPLAY_VSTART" type="uint"/>
		<reg32 offset="0x0018" name="DISPLAY_VEND" type="uint"/>
		<reg32 offset="0x001c" name="ACTIVE_HCTL" type="mdp40_active_hctl"/>
		<reg32 offset="0x0020" name="ACTIVE_VSTART" type="uint"/>
		<reg32 offset="0x0024" name="ACTIVE_VEND" type="uint"/>
		<reg32 offset="0x0028" name="BORDER_CLR"/>
		<reg32 offset="0x002c" name="UNDERFLOW_CLR" type="mdp40_underflow_clr"/>
		<reg32 offset="0x0030" name="HSYNC_SKEP"/>
		<reg32 offset="0x0038" name="CTRL_POLARITY" type="mdp40_ctrl_polarity"/>
	</array>
</domain>

<domain name="DSI" width="32">
	<bitset name="dsi_irqs">
		<bitfield name="CMD_DMA_DONE" pos="0" type="boolean"/>
		<bitfield name="MASK_CMD_DMA_DONE" pos="1" type="boolean"/>
		<bitfield name="CMD_MDP_DONE" pos="8" type="boolean"/>
		<bitfield name="MASK_CMD_MDP_DONE" pos="9" type="boolean"/>
		<bitfield name="VIDEO_DONE" pos="16" type="boolean"/>
		<bitfield name="MASK_VIDEO_DONE" pos="17" type="boolean"/>
		<bitfield name="ERROR" pos="24" type="boolean"/>
		<bitfield name="MASK_ERROR" pos="25" type="boolean"/>
	</bitset>

	<reg32 offset="0x00000" name="CNTL">
		<bitfield name="ENABLE" pos="0" type="boolean"/>
		<bitfield name="VID_MODE_EN" pos="1" type="boolean"/>
		<bitfield name="CMD_MODE_EN" pos="2" type="boolean"/>
	</reg32>

	<reg32 offset="0x00004" name="STATUS0">
		<bitfield name="CMD_MODE_DMA_BUSY" pos="1" type="boolean"/>
		<bitfield name="VIDEO_MODE_ENGINE_BUSY" pos="3" type="boolean"/>
		<bitfield name="DSI_BUSY" pos="4" type="boolean"/>  <!-- see mipi_dsi_cmd_bta_sw_trigger() -->
	</reg32>

	<reg32 offset="0x00008" name="FIFO_STATUS"/>
	<reg32 offset="0x0000c" name="VID_CFG0"/>
	<reg32 offset="0x0001c" name="VID_CFG1"/>
	<reg32 offset="0x00038" name="CMD_DMA_CTRL"/>
	<reg32 offset="0x0003c" name="CMD_CFG0"/>
	<reg32 offset="0x00040" name="CMD_CFG1"/>
	<reg32 offset="0x00044" name="DMA_BASE"/>
	<reg32 offset="0x00048" name="DMA_LEN"/>
	<reg32 offset="0x00064" name="ACK_ERR_STATUS"/>
	<array offset="0x00068" name="RDBK" length="4" stride="4">
		<reg32 offset="0x0" name="DATA"/>
	</array>
	<reg32 offset="0x00080" name="TRIG_CTRL"/>
	<reg32 offset="0x0008c" name="TRIG_DMA"/>
	<reg32 offset="0x000b0" name="DLN0_PHY_ERR"/>
	<reg32 offset="0x000bc" name="TIMEOUT_STATUS"/>
	<reg32 offset="0x000c0" name="CLKOUT_TIMING_CTRL"/>
	<reg32 offset="0x000c8" name="EOT_PACKET_CTRL"/>
	<reg32 offset="0x000ac" name="LAN_SWAP_CTRL"/>
	<reg32 offset="0x00108" name="ERR_INT_MASK0"/>
	<reg32 offset="0x0010c" name="INTR_CTRL" type="dsi_irqs"/>
	<reg32 offset="0x00114" name="RESET"/>
	<reg32 offset="0x00118" name="CLK_CTRL"/>
	<reg32 offset="0x00128" name="PHY_RESET"/>

	<reg32 offset="0x00200" name="PHY_PLL_CTRL_0"/>
	<reg32 offset="0x00204" name="PHY_PLL_CTRL_1"/>
	<reg32 offset="0x00208" name="PHY_PLL_CTRL_2"/>
	<reg32 offset="0x0020c" name="PHY_PLL_CTRL_3"/>
	<reg32 offset="0x00210" name="PHY_PLL_CTRL_4"/>
	<reg32 offset="0x00214" name="PHY_PLL_CTRL_5"/>
	<reg32 offset="0x00218" name="PHY_PLL_CTRL_6"/>
	<reg32 offset="0x0021c" name="PHY_PLL_CTRL_7"/>
	<reg32 offset="0x00220" name="PHY_PLL_CTRL_8"/>
	<reg32 offset="0x00224" name="PHY_PLL_CTRL_9"/>
	<reg32 offset="0x00228" name="PHY_PLL_CTRL_10"/>
	<reg32 offset="0x0022c" name="PHY_PLL_CTRL_11"/>
	<reg32 offset="0x00230" name="PHY_PLL_CTRL_12"/>
	<reg32 offset="0x00234" name="PHY_PLL_CTRL_13"/>
	<reg32 offset="0x00238" name="PHY_PLL_CTRL_14"/>
	<reg32 offset="0x0023c" name="PHY_PLL_CTRL_15"/>
	<reg32 offset="0x00240" name="PHY_PLL_CTRL_16"/>
	<reg32 offset="0x00244" name="PHY_PLL_CTRL_17"/>
	<reg32 offset="0x00248" name="PHY_PLL_CTRL_18"/>
	<reg32 offset="0x0024c" name="PHY_PLL_CTRL_19"/>

	<reg32 offset="0x00280" name="PHY_PLL_STATUS">
		<bitfield name="PLL_BUSY" pos="0" type="boolean"/>
	</reg32>

	<array offset="0x00300" name="LN" length="4" stride="0x40">
		<reg32 offset="0x00" name="CFG_0"/>
		<reg32 offset="0x04" name="CFG_1"/>
		<reg32 offset="0x08" name="CFG_2"/>
		<reg32 offset="0x0c" name="TEST_DATAPATH"/>
		<reg32 offset="0x14" name="TEST_STR_0"/>
		<reg32 offset="0x18" name="TEST_STR_1"/>
	</array>

	<reg32 offset="0x00400" name="PHY_LNCK_CFG_0"/>
	<reg32 offset="0x00404" name="PHY_LNCK_CFG_1"/>
	<reg32 offset="0x00408" name="PHY_LNCK_CFG_2"/>

	<reg32 offset="0x0040c" name="PHY_LNCK_TEST_DATAPATH"/>
	<reg32 offset="0x00414" name="PHY_LNCK_TEST_STR0"/>
	<reg32 offset="0x00418" name="PHY_LNCK_TEST_STR1"/>

	<reg32 offset="0x00440" name="PHY_TIMING_CTRL_0"/>
	<reg32 offset="0x00444" name="PHY_TIMING_CTRL_1"/>
	<reg32 offset="0x00448" name="PHY_TIMING_CTRL_2"/>
	<reg32 offset="0x0044c" name="PHY_TIMING_CTRL_3"/>
	<reg32 offset="0x00450" name="PHY_TIMING_CTRL_4"/>
	<reg32 offset="0x00454" name="PHY_TIMING_CTRL_5"/>
	<reg32 offset="0x00458" name="PHY_TIMING_CTRL_6"/>
	<reg32 offset="0x0045c" name="PHY_TIMING_CTRL_7"/>
	<reg32 offset="0x00460" name="PHY_TIMING_CTRL_8"/>
	<reg32 offset="0x00464" name="PHY_TIMING_CTRL_9"/>
	<reg32 offset="0x00468" name="PHY_TIMING_CTRL_10"/>
	<reg32 offset="0x0046c" name="PHY_TIMING_CTRL_11"/>

	<reg32 offset="0x00470" name="PHY_CTRL_0"/>
	<reg32 offset="0x00474" name="PHY_CTRL_1"/>
	<reg32 offset="0x00478" name="PHY_CTRL_2"/>
	<reg32 offset="0x0047c" name="PHY_CTRL_3"/>

	<reg32 offset="0x00480" name="PHY_STRENGTH_0"/>
	<reg32 offset="0x00484" name="PHY_STRENGTH_1"/>
	<reg32 offset="0x00488" name="PHY_STRENGTH_2"/>

	<reg32 offset="0x0048c" name="PHY_BIST_CTRL_0"/>
	<reg32 offset="0x00490" name="PHY_BIST_CTRL_1"/>
	<reg32 offset="0x00494" name="PHY_BIST_CTRL_2"/>
	<reg32 offset="0x00498" name="PHY_BIST_CTRL_3"/>
	<reg32 offset="0x0049c" name="PHY_BIST_CTRL_4"/>

	<reg32 offset="0x004b0" name="PHY_LDO_CNTL"/>

	<reg32 offset="0x00500" name="PHY_REGULATOR_CTRL_0"/>
	<reg32 offset="0x00504" name="PHY_REGULATOR_CTRL_1"/>
	<reg32 offset="0x00508" name="PHY_REGULATOR_CTRL_2"/>
	<reg32 offset="0x0050c" name="PHY_REGULATOR_CTRL_3"/>
	<reg32 offset="0x00510" name="PHY_REGULATOR_CTRL_4"/>

	<reg32 offset="0x00518" name="PHY_REGULATOR_CAL_PWR_CFG"/>
	<reg32 offset="0x00528" name="PHY_CAL_HW_TRIGGER"/>
	<reg32 offset="0x0052c" name="PHY_CAL_SW_CFG_0"/>
	<reg32 offset="0x00530" name="PHY_CAL_SW_CFG_1"/>
	<reg32 offset="0x00534" name="PHY_CAL_SW_CFG_2"/>
	<reg32 offset="0x00538" name="PHY_CAL_HW_CFG_0"/>
	<reg32 offset="0x0053c" name="PHY_CAL_HW_CFG_1"/>
	<reg32 offset="0x00540" name="PHY_CAL_HW_CFG_2"/>
	<reg32 offset="0x00544" name="PHY_CAL_HW_CFG_3"/>
	<reg32 offset="0x00548" name="PHY_CAL_HW_CFG_4"/>
	<reg32 offset="0x00550" name="PHY_CAL_STATUS">
		<bitfield name="CAL_BUSY" pos="4" type="boolean"/>
	</reg32>

	<reg32 offset="0x00214" name=""/>
	<reg32 offset="0x00214" name=""/>
</domain>

<domain name="SFPB" width="32">
</domain>

<domain name="MMSS_CC" width="32">
	<brief>
		Multimedia sub-system clock control.. appears to be used by DSI
		for clocks..
	</brief>

	<reg32 offset="0x0008" name="AHB"/>

	<!--
		possibly these sequences of registers are same, except pre_div_func
		is shifted by 12 in pclk and 14 in clk..  I'm going to guess that
		the register is same and they just multiply value by 4..
	 -->
	<group name="mmss_cc_clk_ctrl">
		<reg32 offset="0x00" name="CC">
			<bitfield name="CLK_EN" pos="0" type="boolean"/>
			<bitfield name="ROOT_EN" pos="2" type="boolean"/>
			<bitfield name="MND_EN" pos="5" type="boolean"/>
			<bitfield name="MND_MODE" low="6" high="7"/>
			<bitfield name="PMXO_SEL" low="8" high="9"/> <!-- not sure high -->
		</reg32>
		<reg32 offset="0x04" name="MD">
			<bitfield name="D" low="0" high="7"/>
			<bitfield name="M" low="8" high="15"/>
		</reg32>
		<reg32 offset="0x08" name="NS">
			<bitfield name="SRC" low="0" high="3"/> <!-- not sure high, but it is >= 1 -->
			<bitfield name="PRE_DIV_FUNC" low="12" high="23"/>
			<bitfield name="VAL" low="24" high="31"></bitfield>
		</reg32>
	</group>

	<array offset="0x004c" name="DSI_CLK_CTRL" length="1" stride="12">
		<use-group name="mmss_cc_clk_ctrl"/>
	</array>
	<array offset="0x0130" name="DSI_PCLK_CTRL" length="1" stride="12">
		<use-group name="mmss_cc_clk_ctrl"/>
	</array>
</domain>

<domain name="QFPROM" width="32">
</domain>

<domain name="HDMI" width="32">
</domain>

</database>
